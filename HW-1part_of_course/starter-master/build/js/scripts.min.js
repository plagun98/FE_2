function getElement(t){return document.getElementById(t)}function setText(t,e){e.innerText=t}function setIcon(t,e){e.setAttribute("src","http://openweathermap.org/img/w/"+t+".png")}function renew(t,e,a,n,i,o){setText(t.main.temp+"C",e),setIcon(t.weather[0].icon,a),setText(n.city.name.replace("Misto ",""),o),setText(t.dt_txt.split(" ")[1].substr(0,t.dt_txt.split(" ")[1].length-3),i)}function getLocation(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState){var t=JSON.parse(this.response);localStorage.setItem("city",t.city);var e="https://api.openweathermap.org/data/2.5/forecast?lat="+t.loc.split(",")[0]+"&lon="+t.loc.split(",")[1]+"&units=metric&APPID=0af240dafbe5c4aae44810aa98092743"}weather(e)},t.open("GET","https://ipinfo.io/geo",!0),t.send()}function weather(t){if(!t)return!1;var e=getElement("weather__icon"),a=getElement("weather__value"),n=getElement("weather__city"),i=getElement("weather__time"),o=getElement("weather__list"),r=(getElement("timeOnClick"),new XMLHttpRequest);r.onreadystatechange=function(){if(4==this.readyState){var t=JSON.parse(this.response),r=t.list[0];renew(r,a,e,t,i,n),o.innerHTML="",t.list.forEach(function(r){var c=r.dt_txt.split(" ")[1],s=document.createElement("div");s.innerText=c.substr(0,c.length-3),s.setAttribute("data-time",r.dt_txt),s.setAttribute("newicon",r.weather[0].icon),s.setAttribute("newtemp",r.main.temp),s.setAttribute("newcity",t.city.name.replace("Misto ","")),s.onclick=function(t){var o=t.target,r=o.getAttribute("data-time").split(" ")[1].substr(0,c.length-3),s=o.getAttribute("newicon"),l=o.getAttribute("newtemp")+"C",p=o.getAttribute("newcity");setText(r,i),setIcon(s,e),setText(l,a),setText(p,n)},o.appendChild(s)})}},r.open("GET",t,!0),r.send()}window.onload=function(){var t=getElement("city");if(t.onchange=function(t){var e=t.target.value;if(console.log(e),0==e)getLocation();else{localStorage.setItem("city",e);var a="http://api.openweathermap.org/data/2.5/forecast?q="+e+",ua&appid=0af240dafbe5c4aae44810aa98092743&units=metric";weather(a)}},localStorage.getItem("city")){var e=localStorage.getItem("city"),a="http://api.openweathermap.org/data/2.5/forecast?q="+e+",ua&appid=0af240dafbe5c4aae44810aa98092743&units=metric";weather(a),console.log("Tut i tak vse est")}else getLocation(),console.log("Shcha dobavim")};
function loadHtml(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState){var t=this.response;n.innerHTML=t,window.location.hash=e}},t.open("GET",e,!0),t.send()}window.onload=function(){var e=document.getElementById("content"),n=document.getElementsByClassName("links");window.location.hash&&loadHtml(window.location.hash.replace("#",""),e);for(var t=0;t<n.length;t++)n[t].addEventListener("click",function(n){n.preventDefault();var t=this.getAttribute("href");loadHtml(t,e)},!0);var o=new FormData,a=document.getElementById("file");a.onchange=function(e){e.target.files;o.append("key","value"),console.log(o)}};


